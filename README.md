# PDA Memristor CV Analysis Pipeline

This repository contains a Python-based pipeline for analyzing Cyclic Voltammetry (CV) data related to PDA (Polydopamine) memristors. It automates the plotting of electropolymerization, pre-treatment, and calibration data, as well as performing electrochemical calculations.

## 1/ Introduction

This project is structured to organize raw data, processed outputs, and modular Python scripts effectively.

### Folder Functions:

*   **`raw_data/`**: This directory is intended to store all your raw experimental data files, typically in `.txt` or `.csv` format. The scripts will read data directly from this folder.
*   **`results/`**: This top-level directory houses all the outputs generated by the pipeline.
    *   **`results/data/`**: Stores processed data, such as JSON files containing calibration parameters (e.g., RHE conversion factors) and CSV files with extracted peak information.
    *   **`results/figures/`**: Contains all the generated plots in `.png` format.
    *   **`results/summary/`**: (Currently not explicitly used in the provided `main.py` but good practice for future expansion) Could store aggregated results, summary reports, or tables.
*   **`modules/`**: This directory contains modular Python scripts that perform specific tasks within the pipeline.
    *   **`modules/plotting/`**: Houses scripts responsible for generating various plots.
    *   **`modules/analysis/`**: Contains scripts for performing electrochemical calculations and data analysis.
    *   **`modules/utils.py`**: A utility file containing common functions, constants (like directory paths), and helper methods used across different modules.

### Main Codes and File Functions:

*   **`main.py`**: This is the central entry point for the entire analysis pipeline. It uses `argparse` to handle command-line arguments, allowing you to select which part of the pipeline to run (e.g., plot electropolymerization, run calibration, or execute the full workflow). It orchestrates calls to functions defined in the `modules` directory.
*   **`modules/plotting/electropoly.py`**: This module is dedicated to processing and plotting Cyclic Voltammetry data specifically for electropolymerization experiments. It includes robust cycle detection logic and options for highlighting specific cycles.
*   **`modules/plotting/calibration.py`**: (Inferred) This module is responsible for handling calibration data, typically involving the conversion of potentials from one reference electrode (e.g., SCE) to another (e.g., RHE). It likely plots calibration curves and saves conversion factors.
*   **`modules/plotting/pretreat.py`**: (Inferred) This module handles the plotting of pre-treatment CV data, which is often performed before the main experiment.
*   **`modules/analysis/peaks.py`**: (Inferred) This module focuses on extracting and saving peak information (e.g., peak potentials and currents) from the CV data.
*   **`modules/utils.py`**: Provides shared resources like `RAW_DATA`, `FIGURES_DIR`, `DATA_DIR` path objects, and potentially functions like `read_json` for consistent access to files and configurations.

## 2/ How to Use

Follow these steps to set up and run the analysis pipeline.

### Prerequisites:

*   Python 3.8+
*   `pip` (Python package installer)
*   A virtual environment (recommended)

### Step 1: Set up the Virtual Environment

It's highly recommended to use a virtual environment to manage project dependencies.

```bash
# Navigate to your project directory
cd /Users/tai/Downloads/Research/PDA-based memristors/plotting

# Create a virtual environment (if you haven't already)
python3 -m venv venv

# Activate the virtual environment
source venv/bin/activate
```

### Step 2: Install Dependencies

Once your virtual environment is active, install the required Python packages.

```bash
pip install pandas numpy matplotlib scipy
```

### Step 3: Place Your Raw Data

Ensure your raw data files (e.g., `.txt` from your electrochemical workstation) are placed in the `raw_data/` directory. The script expects these files to be formatted with:
*   A semicolon (`;`) as a separator.
*   A comma (`,`) as the decimal point.
*   The first row as the header.

Example filename: `PDA_1_Au, Pt small, SCE_10mV_2-10-25.txt`

### Step 4: Run the Analysis Pipeline

You can run specific parts of the pipeline or the entire workflow using `main.py` with various command-line arguments.

#### Example 1: Plotting Electropolymerization Data Only

To plot only the electropolymerization data, use the `--plot_electropoly` flag and provide the `--pda_path` argument with the name of your raw data file.

```bash
(venv) tai@Tais-MacBook-Air plotting % python main.py --plot_electropoly --pda_path "PDA_1_Au, Pt small, SCE_10mV_2-10-25.txt"
```

This command will:
*   Read the specified `pda_path` from the `raw_data/` directory.
*   Generate two plots (highlighted and standard CV) for the electropolymerization data.
*   Save these plots as PNG files in the `results/figures/` directory.
*   Extract and save peak data to `results/data/`.

#### Example 2: Running the Full Workflow

To run the entire pipeline, including calibration, pre-treatment, and electropolymerization plotting, use the `--all` flag and provide all necessary metadata arguments.

```bash
(venv) tai@Tais-MacBook-Air plotting % python main.py --all \
    --sce_path "Fc_SCE_Au, Pt small, SCE_03-11-25.txt" \
    --date "03-11-25" \
    --pH 7.4 \
    --pda_path "PDA_1_Au, Pt small, SCE_10mV_03-11-25.txt" \
    --pretreat_filename "Pre_treat_1_Au, Pt small, SCE_normal_03-11-25.txt"
```

### Step 5: Review Results

After running the script, check the `results/figures/` directory for your generated plots and `results/data/` for any processed data files (e.g., peak tables, calibration JSONs).
